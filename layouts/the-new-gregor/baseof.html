<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" charset="UTF-8" content="text/html">
    <meta name="viewport" content="width=device-width">

    {{ $siteTitle := "The New Gregor" -}}
    <title>{{ $siteTitle }}{{ with .Title }} &raquo; {{ . }}{{ end }}</title>

    {{ $description := "TODO: quote" -}}
    {{- with $description }}
    <meta name="description" content="{{ . }}">
    {{- end }}

    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ $siteTitle }}">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:title" content="{{ .Title }}">
    {{- with $description }}
    <meta property="og:description" content="{{ $description }}">
    {{- end }}
    {{- with .Resources.GetMatch (printf "%s.*" .File.ContentBaseName) }}
    <meta property="og:image" content="{{ .Permalink }}">
    {{- end }}

    {{- block "head" . }}{{- end -}}

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:ital@1&display=swap" as="style">
    <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');" href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:ital@1&display=swap">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:ital@1&display=swap"></noscript>
    {{ $css_reset := resources.Get "/css/reset.css" -}}
    {{ $css_additional := resources.Get "/css/the-new-gregor.css" -}}
    {{ $css_all := slice $css_reset $css_additional | resources.Concat "/css/the-new-gregor.css" | minify | fingerprint "sha512" -}}
    <link rel="stylesheet" href="{{ $css_all.RelPermalink }}" integrity="{{ $css_all.Data.Integrity }}" media="screen">

    <link rel="canonical" href="{{ .Permalink }}">
    <link rel="alternate" type="application/rss+xml" title="{{ .Site.Title }} Feed" href="{{ "index.xml" | absURL }}">
</head>
<body>
<header>
    <div id="logo" aria-label="THE NEW YORKER"></div>
</header>
<main>
    <div id="content">
        {{- block "main" . }}{{- end }}
    </div>
    <nav>
        <a class="prev">previous</a>
        <a class="next">next</a>
    </nav>
</main>

{{ $main_js := resources.Get "/js/main.js" | minify | fingerprint "sha512" }}
<script src="{{ $main_js.RelPermalink }}" integrity="{{ $main_js.Data.Integrity }}" defer></script>
</body>
</html>

